<!DOCTYPE html>
<html lang="ru-RU">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2.0">
      <title>S2L</title>
      <meta name="description" content="a silly simple short links generator" />
      <link rel="icon" href="favicon.avif">
      <style>
         .margin {
            margin-top: 0.67em;
         }
      </style>
   </head>
   <body>
      <label for="link">
         <h1>Compress your link</h1>
      </label>
      <form>
         <input type="text" id="link">
         <br>
         <button type="button" class="margin">Compress</button>
         <br>
         <output class="margin"></output>
      </form>
      <script>
         const input = document.querySelector('input');
         const btn = document.querySelector('button');
         const output = document.querySelector('output');

         btn.addEventListener('click', () => {
            const link = input.value;
            fetch(location.origin + '/compress', {
               method: 'POST',
               body: JSON.stringify({link})
            })
               .then((res) => res.text())
               .then((text) => output.textContent = text)
               .catch((err) => output.textContent = err.message);
         });
      </script>
   </body>
</html>